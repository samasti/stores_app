<signin><loading></loading>
  <div class="form">
    <error message="{error}"></error><text-field label="Email ou celular" ref="login"></text-field><text-field label="Senha" ref="password" type="password"></text-field><br /><button-tag class="center" label="Entrar" onclick="{signin}"></button-tag><br /><line-sep text="ou"></line-sep><br /><button-tag class="center" label="Criar nova conta" onclick="{signup}"></button-tag>
  </div>
  <script>
    signin() {
      var login    = this.refs.login.value()
      var password = this.refs.password.value()
    
      api.signin(login, password).then(function (user) {
        if (user.error) {
          this.error = 'Email, celular ou senha incorretos'
          return this.update()
        }
    
        storage.set('auth_token', user.auth_token)
        storage.set('user', user)
        apiData.auth_token = user.auth_token
        window.user        = user
        app.update()
      }.bind(this))
    }
    
    signup() {
      app.pageManager.navigate('signup')
    }
  </script>
  <style type="text/css">
    signin {
      display: block;
    }
  </style>
</signin>